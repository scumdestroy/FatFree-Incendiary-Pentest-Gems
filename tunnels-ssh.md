
## SSH Tunnels

Send data over ssh to port 9000 on target

```
ssh -L 8090:localhost:9000 james@123.123.123
```


Send data over ssh to port 80 on target through jumphost

```
	ssh -A -t -p22 -L 8800:localhost:8800 james@123.001.123.321 -t ssh -L 8800:localhost:80 james@124.123.122
```


Fwd localhost port 9222 to internal 10.10.15.3:22 through DMZ server1
```
    ssh -p 2222 -i ~/.ssh/keyfile -N -L localhost:9222:10.10.15.3:22 james@server1
```

Using above example, connect to internal server 10.10.15.3
```
    ssh -i ~/.ssh/keyfile -p 9222 james@localhost
```

Start proxy through local port 5443 to remote server
```
    ssh -D 5443 -C -f -N -p9222 james@remoteserver.com
```

Send web traffic over proxy (when using above command)
```
    Firefox Network Settings
    Manual Proxy Config
    SOCKS Host = localhost
    Port = 5443
    SOCKS v5
```

Start ssh using existing connections, send keepalive packets
```
    nano ~/.ssh/config
    ControlMaster auto
    ControlPath ~/.ssh/control:%h:%p:%r

    Host localhost
        StrictHostKeyChecking no
        ServerAliveInterval 60
        ServerAliveCountMax  10
        TCPKeepAlive yes

```

Execute commands over ssh
```
    ssh -p22 james@server 'bash -s' < commands.txt
```

Write list of cmds to disk then execute via ssh
```
cat commands.txt |ssh -p22 james@server 'cat >> /home/james/cmds; /bin/bash /home/james/cmds'
```
